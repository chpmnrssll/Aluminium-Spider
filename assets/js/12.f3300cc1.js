(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{36:function(t,e,s){"use strict";s.r(e);var a=s(0),r=Object(a.a)({},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("p",[t._v("A browser based multi-threaded downloader implemented in vanilla JavaScript.")]),t._v(" "),s("p",[t._v("Fetches parts of a file using the HTTP Range header and downloads\nthose pieces in parallel. When the pieces have all been downloaded, the\noriginal file is re-assembled and saved in the browser's Downloads folder.")]),t._v(" "),s("p"),t._m(0),s("p"),t._v(" "),t._m(1),t._v(" "),s("p",[t._v("The downloader should fetch the file directly from the web browser without a\nserver needed to proxy the file. The download process should not need any\nclient software or browser plugin to be installed. It should allow for resuming\nan interrupted download, or at least retrying a part of the file that was\ninterrupted.")]),t._v(" "),s("p",[t._v("This project will allow us to specify the number of download threads and the\nsize of each request... so we can tune it for specific network conditions, if\nthat is necessary.")]),t._v(" "),t._m(2),t._v(" "),s("p",[t._v("100% client side JavaScript, no plug-ins or proxy required")]),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),s("ul",[s("li",[t._v("Uses "),s("a",{attrs:{href:"https://github.com/jimmywarting/StreamSaver.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("StreamSaver.js"),s("OutboundLink")],1),t._v(" to simplify downloading the output stream.")]),t._v(" "),s("li",[t._v("Concatenates each response stream (in order) into a final output stream")]),t._v(" "),s("li",[t._v("Cross-origin dependency (mitm.html)")]),t._v(" "),s("li",[t._v("Service worker timeout")]),t._v(" "),s("li",[t._v("WhatWG Web Streams")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/creatorrr/web-streams-polyfill",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Streams Polyfill"),s("OutboundLink")],1)])]),t._v(" "),t._m(7),t._v(" "),s("ul",[s("li",[t._v("Uses "),s("a",{attrs:{href:"https://github.com/vitalets/bro-fs",target:"_blank",rel:"noopener noreferrer"}},[t._v("Bro-fs"),s("OutboundLink")],1),t._v(" (HTML5 Filesystem api) to temporarily save each chunk.")]),t._v(" "),s("li",[t._v("Concatenates all chunks once complete and triggers a[download] with final file.")]),t._v(" "),s("li",[t._v("HTML5 Filesystem is marked deprecated but is still commonly in use.")])]),t._v(" "),t._m(8),t._v(" "),t._m(9),t._v(" "),s("p",[t._v("The Multithread constructor accepts a single object parameter:")]),t._v(" "),t._m(10),t._m(11),t._v(" "),s("p",[t._v("Multithread triggers several events that you can attach callbacks to. The\ncallbacks will be called with a single object consisting of the following keys:")]),t._v(" "),t._m(12),t._v(" "),s("p",[t._v("Each individual chunk will also trigger it's own events:")]),t._v(" "),t._m(13),t._v(" "),s("p",[t._v('PromiseQueue provides concurrency by using a queue of promises. It will\nautomatically retry a configurable amount of times before triggering either an\n"onFinish" or "onError" event.')]),t._v(" "),t._m(14),t._v(" "),s("a",{attrs:{href:"https://backblaze-b2-samples.github.io/multithreaded-downloader-js/examples/backblaze.html"}},[s("img",{staticClass:"lazyLoad tiny",attrs:{"data-src":t.$withBase("/assets/backblazeB2.png"),alt:"Backblaze B2"}})]),t._v(" "),s("a",{attrs:{href:"https://backblaze-b2-samples.github.io/multithreaded-downloader-js/examples/googleDrive.html"}},[s("img",{staticClass:"lazyLoad tiny",attrs:{"data-src":t.$withBase("/assets/googleDrive.jpg"),alt:"Google Drive"}})]),t._v(" "),t._m(15),t._v(" "),s("a",{attrs:{href:"https://github.com/Backblaze-B2-Samples/multithreaded-downloader-js"}},[s("img",{staticClass:"lazyLoad tiny",attrs:{"data-src":t.$withBase("/assets/logo/logoGithub.png"),alt:"Github"}})]),t._v(" "),t._m(16),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://blog.ghaiklor.com/parallel-chunk-requests-in-a-browser-via-service-workers-7be10be2b75f",target:"_blank",rel:"noopener noreferrer"}},[t._v("Parallel chunk requests in a browser via Service Workers"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Streams_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Streams API"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://streams.spec.whatwg.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Web Streams Spec"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/mafintosh/browser-server",target:"_blank",rel:"noopener noreferrer"}},[t._v("browser-server"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/jonbern/fetch-retry",target:"_blank",rel:"noopener noreferrer"}},[t._v("fetch-retry"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://pipes.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Pipes.js"),s("OutboundLink")],1)])])])},[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#requirements"}},[t._v("Requirements")])]),s("li",[s("a",{attrs:{href:"#methods"}},[t._v("Methods")]),s("ul",[s("li",[s("a",{attrs:{href:"#a-download"}},[t._v("a[download]")])]),s("li",[s("a",{attrs:{href:"#streamsaver-js"}},[t._v("StreamSaver.js")])]),s("li",[s("a",{attrs:{href:"#html5-filesystem-api"}},[t._v("HTML5 FileSystem API")])])])]),s("li",[s("a",{attrs:{href:"#usage"}},[t._v("Usage")]),s("ul",[s("li",[s("a",{attrs:{href:"#constructor"}},[t._v("Constructor")])]),s("li",[s("a",{attrs:{href:"#callbacks"}},[t._v("Callbacks")])])])]),s("li",[s("a",{attrs:{href:"#demo"}},[t._v("Demo")])]),s("li",[s("a",{attrs:{href:"#source"}},[t._v("Source")])]),s("li",[s("a",{attrs:{href:"#reference"}},[t._v("Reference")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"requirements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#requirements","aria-hidden":"true"}},[this._v("#")]),this._v(" Requirements")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Sends HTTP HEAD request to get the file info and calculate number of chunks")]),this._v(" "),e("li",[this._v('Sends HTTP GET requests with "Range: bytes=start-end" header for each chunk')]),this._v(" "),e("li",[this._v("Monitor the progress of each response stream")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"methods"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#methods","aria-hidden":"true"}},[this._v("#")]),this._v(" Methods")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"a-download"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-download","aria-hidden":"true"}},[this._v("#")]),this._v(" a[download]")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("WhatWG Web Streams")]),this._v(" "),e("li",[this._v("Memory limit")]),this._v(" "),e("li",[this._v("Blob")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"streamsaver-js"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#streamsaver-js","aria-hidden":"true"}},[this._v("#")]),this._v(" StreamSaver.js")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"html5-filesystem-api"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#html5-filesystem-api","aria-hidden":"true"}},[this._v("#")]),this._v(" HTML5 FileSystem API")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"usage"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#usage","aria-hidden":"true"}},[this._v("#")]),this._v(" Usage")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"constructor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#constructor","aria-hidden":"true"}},[this._v("#")]),this._v(" Constructor")])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MultiThread")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://some-url/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The request url")]),t._v("\n  headers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("                  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Request headers to pass-though")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Authorization'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`Bearer ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("accessToken"),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("`")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  fileName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'some-file.ext'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// The final output fileName")]),t._v("\n  chunkSize"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("               "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Size of each chunk in MB")]),t._v("\n  threads"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Number of concurrent request threads")]),t._v("\n  retries"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("                 "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Number of retry attempts")]),t._v("\n  retryDelay"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v("            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Delay before another retry attempt in ms")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h3",{attrs:{id:"callbacks"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#callbacks","aria-hidden":"true"}},[this._v("#")]),this._v(" Callbacks")])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("onStart({ contentLength, chunks })")]),this._v(" "),e("li",[this._v("onFinish({})")]),this._v(" "),e("li",[this._v("onProgress({ contentLength, loaded })")]),this._v(" "),e("li",[this._v("onError({ error })")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("onChunkStart({ id })")]),this._v(" "),e("li",[this._v("onChunkFinish({ id })")]),this._v(" "),e("li",[this._v("onChunkProgress({ contentLength, loaded, id })")]),this._v(" "),e("li",[this._v("onChunkError({ id, error })")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"demo"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#demo","aria-hidden":"true"}},[this._v("#")]),this._v(" Demo")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"source"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#source","aria-hidden":"true"}},[this._v("#")]),this._v(" Source")])},function(){var t=this.$createElement,e=this._self._c||t;return e("h2",{attrs:{id:"reference"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reference","aria-hidden":"true"}},[this._v("#")]),this._v(" Reference")])}],!1,null,null,null);e.default=r.exports}}]);